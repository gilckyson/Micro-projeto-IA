{% extends "base.html" %}
{% block title %}Histórico de Desculpas{% endblock %}

{% block content %}
    <h2 class="text-3xl font-extrabold text-center text-pink-400 mb-8 border-b border-gray-700 pb-4">
        Histórico de Catástrofes Pessoais
    </h2>

    <div class="text-center mb-6">
        <a href="/" class="text-purple-400 hover:text-purple-300 transition duration-300 transform hover:scale-105 inline-flex items-center">
            <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
            Gerar uma nova desculpa dramática
        </a>
    </div>

    {% if historico %}
        <div class="space-y-6">
            {% for desculpa in historico %}
                <div class="bg-gray-800 p-6 rounded-xl shadow-2xl border border-gray-700 hover:border-pink-500 transition duration-500">
                    
                    <h3 class="text-xl font-bold text-pink-400 mb-2">
                        Motivo Original: 
                        <span class="text-white font-normal">{{ desculpa.motivo }}</span>
                    </h3>
                    
                    <hr class="border-gray-700 my-3">
                    
                    <p class="text-gray-300 whitespace-pre-wrap leading-relaxed italic mb-4">
                        "{{ desculpa.conteudo }}"
                    </p>
                    
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center text-sm mt-4 p-3 bg-gray-900 rounded-lg border border-purple-600/50">
                        
                        <p class="font-medium text-purple-300 mb-2 md:mb-0">
                            Pontuação de Drama: 
                            <span class="text-yellow-400 block md:inline-block mt-1 md:mt-0">{{ desculpa.calcular_pontuacao_drama() }}</span>
                        </p>
                        
                        <p class="text-gray-500">
                            Total de Caracteres: {{ desculpa.caracteres }}
                        </p>
                    </div>

                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center p-10 bg-gray-800 rounded-xl shadow-xl border border-dashed border-gray-700">
            <p class="text-xl text-gray-400 mb-4">Ainda não há desculpas registradas!</p>
            <p class="text-sm text-gray-500">Gere a primeira para começar sua coleção de tragédias.</p>
        </div>
    {% endif %}

{% endblock %}

---

### Observações sobre o Template:

1.  **Herança e Título:** Ele herda do `base.html` e define um título específico.
2.  **`{% if historico %}`:** Essa checagem garante que, se a lista estiver vazia, ele exibe uma mensagem amigável (`Ainda não há desculpas registradas!`) em vez de tentar iterar sobre uma lista vazia.
3.  **Iteração:** O bloco `{% for desculpa in historico %}` itera sobre cada objeto que foi passado do `main.py`.
4.  **Acesso a Atributos e Métodos:**
    * `{{ desculpa.motivo }}` e `{{ desculpa.conteudo }}` acessam os atributos da sua classe `Desculpa`.
    * [cite_start]`{{ desculpa.calcular_pontuacao_drama() }}` **chama o método de negócio** da sua classe, o que é ótimo para cumprir o requisito de Orientação a Objetos[cite: 271].
5.  **Estilo:** Utiliza classes como `shadow-2xl`, `border-pink-500` e cores (`pink-400`, `purple-300`) para manter a coerência visual com o restante do seu projeto.
6.  **`whitespace-pre-wrap`:** Esta classe é importante no parágrafo do `conteudo` para preservar as quebras de linha e o espaçamento gerados pelo Gemini, tornando o texto mais limpo.